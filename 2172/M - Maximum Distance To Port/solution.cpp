#include<bits/stdc++.h>using namespace std;inline int read(){	int x=0,f=1;	char c=getchar();	while(!isdigit(c)){if(c=='-') f=-1;c=getchar();}	while(isdigit(c)){x=x*10+(c&15);c=getchar();}	return x*f;}vector<int> e[1<<20];int a[1<<20],b[1<<20],c[1<<20];signed main(){	int n=read(),m=read(),k=read();	for(int i=1; i<=n; ++i) b[i]=read();	for(int i=1; i<=m; ++i)	{		int u=read(),v=read();		e[u].push_back(v);		e[v].push_back(u);	}queue<int> q;	memset(a,-1,sizeof(a));a[1]=0;q.push(1);	while(!q.empty())	{		int x=q.front();q.pop();c[b[x]]=max(c[b[x]],a[x]);		for(int y:e[x]) if(a[y]==-1)			a[y]=a[x]+1,q.push(y);	}	for(int i=1; i<=k; ++i) printf("%d ",c[i]);	puts("");	return 0;}